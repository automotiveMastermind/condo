<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <!-- import solution specific props -->
    <Import Project="$(ProjectRoot)condo.props" Condition=" Exists('$(ProjectRoot)condo.props') "/>
    <Import Project="$(SrcRoot)condo.props" Condition=" Exists('$(SrcRoot)condo.props') And '$(TestProject)' == 'false' "/>
    <Import Project="$(TestRoot)condo.props" Condition=" Exists('$(TestRoot)condo.props') And '$(TestProject)' == 'true' "/>
    <Import Project="$(BuildRoot)condo.props" Condition=" Exists('$(BuildRoot)condo.props') "/>
    <Import Project="$(SolutionRoot)condo.props" Condition=" Exists('$(SolutionRoot)condo.props') "/>

    <PropertyGroup>
        <!-- enable code analysis by default -->
        <CodeAnalysis Condition=" '$(CodeAnalysis)' == '' ">true</CodeAnalysis>

        <!-- determine if we are a test project -->
        <TestProject>false</TestProject>
        <TestProject Condition=" $(MSBuildProjectDirectory.StartsWith($(TestRoot), System.StringComparison.OrdinalIgnoreCase)) ">true</TestProject>

        <!-- treat warnings as errors by default -->
        <AllowWarningsAsErrors Condition=" '$(AllowWarningsAsErrors)' == '' ">true</AllowWarningsAsErrors>

        <!-- set the documentation path to always output the xml by default -->
        <DocumentationFile Condition=" '$(DocumentationFile)' == '' ">$(OutputPath)$(ProjectName).xml</DocumentationFile>

        <!-- always set the test results output path -->
        <TestResultsOutputPath>$(TestArtifactsRoot)</TestResultsOutputPath>

        <!-- set the web project output path -->
        <WebProjectOutputDir Condition=" '$(WebProjectOutputDir)' == '' ">$([System.IO.Path]::Combine('$(SiteRoot)', '$(MSBuildProjectName)'))</WebProjectOutputDir>

        <!-- include the overrides before the microsoft common targets -->
        <CustomBeforeMicrosoftCSharpTargets>$(PropsPath)Condo.Overrides.props</CustomBeforeMicrosoftCSharpTargets>

        <!-- include the imports after the microsoft common targets -->
        <CustomAfterMicrosoftCSharpTargets>$(PropsPath)Condo.Imports.props</CustomAfterMicrosoftCSharpTargets>

        <!-- set the output path -->
        <OutputPath Condition=" '$(OutputRoot)' != '' ">$(OutputRoot)</OutputPath>

        <!-- always emit debug symbols -->
        <DebugSymbols>true</DebugSymbols>
    </PropertyGroup>

    <!-- defaults for debug configuration -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
        <DebugType>full</DebugType>
        <Optimize>false</Optimize>
        <DefineConstants>DEBUG;TRACE</DefineConstants>
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <RunCodeAnalysis>false</RunCodeAnalysis>
        <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
        <CodeAnalysisTreatWarningsAsErrors>false</CodeAnalysisTreatWarningsAsErrors>
    </PropertyGroup>

    <!-- defaults for release configuration -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <DebugType>pdbonly</DebugType>
        <Optimize>true</Optimize>
        <DefineConstants>TRACE</DefineConstants>
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <RunCodeAnalysis>false</RunCodeAnalysis>
        <TreatWarningsAsErrors>$(AllowWarningsAsErrors)</TreatWarningsAsErrors>
    </PropertyGroup>

    <!-- defaults for analysis configuration -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Analysis' ">
        <DebugType>pdbonly</DebugType>
        <Optimize>true</Optimize>
        <DefineConstants>TRACE;CODE_ANALYSIS</DefineConstants>
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <RunCodeAnalysis>$(CodeAnalysis)</RunCodeAnalysis>
        <TreatWarningsAsErrors>$(AllowWarningsAsErrors)</TreatWarningsAsErrors>
        <CodeAnalysisTreatWarningsAsErrors>$(AllowWarningsAsErrors)</CodeAnalysisTreatWarningsAsErrors>
    </PropertyGroup>

    <!-- defaults for documentation configuration -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Documentation' ">
        <DebugType>full</DebugType>
        <Optimize>false</Optimize>
        <DefineConstants>TRACE</DefineConstants>
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <RunCodeAnalysis>$(CodeAnalysis)</RunCodeAnalysis>
        <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
        <CodeAnalysisTreatWarningsAsErrors>false</CodeAnalysisTreatWarningsAsErrors>
    </PropertyGroup>

    <!--defaults for any cpu -->
    <PropertyGroup Condition=" '$(Platform)' == 'AnyCPU' ">
    </PropertyGroup>

    <!--defaults for x86 -->
    <PropertyGroup Condition=" '$(Platform)' == 'x86' ">
    </PropertyGroup>

    <!--defaults for x64 -->
    <PropertyGroup Condition=" '$(Platform)' == 'x64' ">
    </PropertyGroup>

    <PropertyGroup>
        <!-- force rebuild if this file changes -->
        <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
    </PropertyGroup>
</Project>